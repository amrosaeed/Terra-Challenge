{"ast":null,"code":"import{div,gt,gte,lte,pow}from\"./math\";import{getLength,omitEmpty}from\"./utils\";import{dp,validateDp,lookup,format,toAmount}from\"./parse\";/* forms */export var placeholder=function placeholder(symbol){return step(symbol).replace(\"1\",\"0\");};export var step=function step(symbol){return div(1,pow(10,dp(symbol)));};export var renderBalance=function renderBalance(balance,symbol,affix){return balance&&symbol?{title:[affix,\"Balance\"].filter(Boolean).join(\" \"),content:format(balance,symbol)}:undefined;};/* validate */export var validate={required:function required(value){return!value?\"Required\":\"\";},length:function length(value,_ref,label){var min=_ref.min,max=_ref.max;return min&&getLength(value)<min?\"\".concat(label,\" must be longer than \").concat(min,\" bytes.\"):max&&getLength(value)>max?\"\".concat(label,\" must be shorter than \").concat(max,\" bytes.\"):\"\";},address:function address(value,isAddress){return!value?\"Required\":!isAddress.some(function(validate){return validate(value);})?\"Invalid address\":\"\";},url:function url(value){try{var _URL=new URL(value),hostname=_URL.hostname;return hostname.includes(\".\")?\"\":\"Invalid URL\";}catch(error){var protocol=[\"https://\",\"http://\"];return!protocol.some(function(p){return value.startsWith(p);})?\"URL must start with \".concat(protocol.join(\" or \")):\"Invalid URL\";}},amount:function amount(value){var range=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var label=arguments.length>2&&arguments[2]!==undefined?arguments[2]:\"Amount\";var optional=range.optional,symbol=range.symbol,min=range.min,max=range.max;var amount=symbol?toAmount(value):value;return optional&&!value?\"\":!value?\"Required\":!gt(value,0)?\"\".concat(label,\" must be greater than 0\"):min&&!gte(amount,min)?\"\".concat(label,\" must be greater than \").concat(min):!validateDp(value,symbol)?\"\".concat(label,\" must be within \").concat(dp(symbol),\" decimal points\"):max&&gt(max,0)&&!(gt(amount,0)&&lte(amount,max))?\"\".concat(label,\" must be between 0 and \").concat(lookup(max,symbol)):symbol&&max&&!gt(max,0)?\"Insufficient balance\":\"\";},symbol:function symbol(_symbol){var regex=RegExp(/[a-zA-Z+-]/);return Array.from(_symbol).some(function(char){return!regex.test(char);})?\"Invalid\":\"\";}};/* data (utf-8) */export var toBase64=function toBase64(object){try{return Buffer.from(JSON.stringify(omitEmpty(object))).toString(\"base64\");}catch(error){return\"\";}};export var fromBase64=function fromBase64(string){try{return JSON.parse(Buffer.from(string,\"base64\").toString());}catch(error){return{};}};","map":{"version":3,"sources":["/home/amro/MirrorProtocol/eth-web-app/src/libs/formHelpers.ts"],"names":["div","gt","gte","lte","pow","getLength","omitEmpty","dp","validateDp","lookup","format","toAmount","placeholder","symbol","step","replace","renderBalance","balance","affix","title","filter","Boolean","join","content","undefined","validate","required","value","length","label","min","max","address","isAddress","some","url","URL","hostname","includes","error","protocol","p","startsWith","amount","range","optional","regex","RegExp","Array","from","char","test","toBase64","object","Buffer","JSON","stringify","toString","fromBase64","string","parse"],"mappings":"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","sourcesContent":["import { div, gt, gte, lte, pow } from \"./math\"\nimport { getLength, omitEmpty } from \"./utils\"\nimport { dp, validateDp, lookup, format, toAmount } from \"./parse\"\n\n/* forms */\nexport const placeholder = (symbol?: string) => step(symbol).replace(\"1\", \"0\")\nexport const step = (symbol?: string) => div(1, pow(10, dp(symbol)))\n\nexport const renderBalance = (\n  balance?: string,\n  symbol?: string,\n  affix?: string\n) =>\n  balance && symbol\n    ? {\n        title: [affix, \"Balance\"].filter(Boolean).join(\" \"),\n        content: format(balance, symbol),\n      }\n    : undefined\n\n/* validate */\ninterface NumberRange {\n  min?: number\n  max?: number\n}\n\ninterface AmountRange {\n  optional?: boolean\n  symbol?: string\n  min?: string\n  max?: string\n}\n\nexport const validate = {\n  required: (value: string) => (!value ? \"Required\" : \"\"),\n\n  length: (value: string, { min, max }: NumberRange, label: string) =>\n    min && getLength(value) < min\n      ? `${label} must be longer than ${min} bytes.`\n      : max && getLength(value) > max\n      ? `${label} must be shorter than ${max} bytes.`\n      : \"\",\n\n  address: (value: string, isAddress: ((value: string) => boolean)[]) =>\n    !value\n      ? \"Required\"\n      : !isAddress.some((validate) => validate(value))\n      ? \"Invalid address\"\n      : \"\",\n\n  url: (value: string) => {\n    try {\n      const { hostname } = new URL(value)\n      return hostname.includes(\".\") ? \"\" : \"Invalid URL\"\n    } catch (error) {\n      const protocol = [\"https://\", \"http://\"]\n      return !protocol.some((p) => value.startsWith(p))\n        ? `URL must start with ${protocol.join(\" or \")}`\n        : \"Invalid URL\"\n    }\n  },\n\n  amount: (value: string, range: AmountRange = {}, label = \"Amount\") => {\n    const { optional, symbol, min, max } = range\n    const amount = symbol ? toAmount(value) : value\n\n    return optional && !value\n      ? \"\"\n      : !value\n      ? \"Required\"\n      : !gt(value, 0)\n      ? `${label} must be greater than 0`\n      : min && !gte(amount, min)\n      ? `${label} must be greater than ${min}`\n      : !validateDp(value, symbol)\n      ? `${label} must be within ${dp(symbol)} decimal points`\n      : max && gt(max, 0) && !(gt(amount, 0) && lte(amount, max))\n      ? `${label} must be between 0 and ${lookup(max, symbol)}`\n      : symbol && max && !gt(max, 0)\n      ? \"Insufficient balance\"\n      : \"\"\n  },\n\n  symbol: (symbol: string) => {\n    const regex = RegExp(/[a-zA-Z+-]/)\n    return Array.from(symbol).some((char) => !regex.test(char)) ? \"Invalid\" : \"\"\n  },\n}\n\n/* data (utf-8) */\nexport const toBase64 = (object: object) => {\n  try {\n    return Buffer.from(JSON.stringify(omitEmpty(object))).toString(\"base64\")\n  } catch (error) {\n    return \"\"\n  }\n}\n\nexport const fromBase64 = <T>(string: string): T => {\n  try {\n    return JSON.parse(Buffer.from(string, \"base64\").toString())\n  } catch (error) {\n    return {} as T\n  }\n}\n"]},"metadata":{},"sourceType":"module"}