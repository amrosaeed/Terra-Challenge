{"ast":null,"code":"import{selectorFamily,useRecoilValue,waitForNone}from\"recoil\";import{dictWithFn}from\"./dbUtils\";import{assetsQuery,whitelistQuery}from\"./assets\";import{balanceQuery}from\"./balance\";export var balancesQuery=selectorFamily({key:\"balances\",get:function get(key){return function(_ref){var get=_ref.get;var whitelist=get(whitelistQuery);var queries=dictWithFn(whitelist,function(item){return balanceQuery(item[key]);});var balances=get(waitForNone(queries));return balances;};}});export var assetsBalancesQuery=selectorFamily({key:\"assetsBalances\",get:function get(key){return function(_ref2){var get=_ref2.get;var assets=get(assetsQuery);var queries=dictWithFn(assets,function(item){return balanceQuery(item[key]);});var balances=get(waitForNone(queries));return balances;};}});export var useBalances=function useBalances(){var key=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"token\";var value=useRecoilValue(balancesQuery(key));return value;};export var useAssetsBalances=function useAssetsBalances(){var key=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"token\";var value=useRecoilValue(assetsBalancesQuery(key));return value;};","map":{"version":3,"sources":["/home/amro/MirrorProtocol/eth-web-app/src/database/balances.ts"],"names":["selectorFamily","useRecoilValue","waitForNone","dictWithFn","assetsQuery","whitelistQuery","balanceQuery","balancesQuery","key","get","whitelist","queries","item","balances","assetsBalancesQuery","assets","useBalances","value","useAssetsBalances"],"mappings":"AAAA,OAASA,cAAT,CAAyBC,cAAzB,CAAyCC,WAAzC,KAA4D,QAA5D,CACA,OAASC,UAAT,KAA2B,WAA3B,CACA,OAASC,WAAT,CAAsBC,cAAtB,KAA4C,UAA5C,CACA,OAASC,YAAT,KAA6B,WAA7B,CAEA,MAAO,IAAMC,CAAAA,aAAa,CAAGP,cAAc,CAAC,CAC1CQ,GAAG,CAAE,UADqC,CAE1CC,GAAG,CAAE,aAACD,GAAD,QAA2B,eAAa,IAAVC,CAAAA,GAAU,MAAVA,GAAU,CAC3C,GAAMC,CAAAA,SAAS,CAAGD,GAAG,CAACJ,cAAD,CAArB,CACA,GAAMM,CAAAA,OAAO,CAAGR,UAAU,CAACO,SAAD,CAAY,SAACE,IAAD,QAAUN,CAAAA,YAAY,CAACM,IAAI,CAACJ,GAAD,CAAL,CAAtB,EAAZ,CAA1B,CACA,GAAMK,CAAAA,QAAQ,CAAGJ,GAAG,CAACP,WAAW,CAACS,OAAD,CAAZ,CAApB,CACA,MAAOE,CAAAA,QAAP,CACD,CALI,EAFqC,CAAD,CAApC,CAUP,MAAO,IAAMC,CAAAA,mBAAmB,CAAGd,cAAc,CAAC,CAChDQ,GAAG,CAAE,gBAD2C,CAEhDC,GAAG,CAAE,aAACD,GAAD,QAA4B,gBAAa,IAAVC,CAAAA,GAAU,OAAVA,GAAU,CAC5C,GAAMM,CAAAA,MAAM,CAAGN,GAAG,CAACL,WAAD,CAAlB,CACA,GAAMO,CAAAA,OAAO,CAAGR,UAAU,CAACY,MAAD,CAAS,SAACH,IAAD,QAAUN,CAAAA,YAAY,CAACM,IAAI,CAACJ,GAAD,CAAL,CAAtB,EAAT,CAA1B,CACA,GAAMK,CAAAA,QAAQ,CAAGJ,GAAG,CAACP,WAAW,CAACS,OAAD,CAAZ,CAApB,CACA,MAAOE,CAAAA,QAAP,CACD,CALI,EAF2C,CAAD,CAA1C,CAUP,MAAO,IAAMG,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAqC,IAApCR,CAAAA,GAAoC,2DAAZ,OAAY,CAC9D,GAAMS,CAAAA,KAAK,CAAGhB,cAAc,CAACM,aAAa,CAACC,GAAD,CAAd,CAA5B,CACA,MAAOS,CAAAA,KAAP,CACD,CAHM,CAKP,MAAO,IAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,EAAsC,IAArCV,CAAAA,GAAqC,2DAAZ,OAAY,CACrE,GAAMS,CAAAA,KAAK,CAAGhB,cAAc,CAACa,mBAAmB,CAACN,GAAD,CAApB,CAA5B,CACA,MAAOS,CAAAA,KAAP,CACD,CAHM","sourcesContent":["import { selectorFamily, useRecoilValue, waitForNone } from \"recoil\"\nimport { dictWithFn } from \"./dbUtils\"\nimport { assetsQuery, whitelistQuery } from \"./assets\"\nimport { balanceQuery } from \"./balance\"\n\nexport const balancesQuery = selectorFamily({\n  key: \"balances\",\n  get: (key: keyof ListedItem) => ({ get }) => {\n    const whitelist = get(whitelistQuery)\n    const queries = dictWithFn(whitelist, (item) => balanceQuery(item[key]))\n    const balances = get(waitForNone(queries))\n    return balances\n  },\n})\n\nexport const assetsBalancesQuery = selectorFamily({\n  key: \"assetsBalances\",\n  get: (key: keyof ListedAsset) => ({ get }) => {\n    const assets = get(assetsQuery)\n    const queries = dictWithFn(assets, (item) => balanceQuery(item[key]))\n    const balances = get(waitForNone(queries))\n    return balances\n  },\n})\n\nexport const useBalances = (key: keyof ListedItem = \"token\") => {\n  const value = useRecoilValue(balancesQuery(key))\n  return value\n}\n\nexport const useAssetsBalances = (key: keyof ListedAsset = \"token\") => {\n  const value = useRecoilValue(assetsBalancesQuery(key))\n  return value\n}\n"]},"metadata":{},"sourceType":"module"}