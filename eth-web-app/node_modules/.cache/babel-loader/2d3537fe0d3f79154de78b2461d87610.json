{"ast":null,"code":"import _toConsumableArray from\"/home/amro/MirrorProtocol/eth-web-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/home/amro/MirrorProtocol/eth-web-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"/home/amro/MirrorProtocol/eth-web-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import classNames from\"classnames/bind\";import{path}from\"ramda\";import styles from\"./Table.module.scss\";var cx=classNames.bind(styles);var BorderPosition;(function(BorderPosition){BorderPosition[\"LEFT\"]=\"left\";BorderPosition[\"RIGHT\"]=\"right\";})(BorderPosition||(BorderPosition={}));var SEP=\".\";function Table(props){var rows=props.rows,columns=props.columns,dataSource=props.dataSource;var normalized=columns.reduce(function(acc,_ref){var children=_ref.children,column=_objectWithoutProperties(_ref,[\"children\"]);// Normalize nested columns below `children`\n// The first child draws the left border\n// The last child draws the right border.\nvar renderChild=function renderChild(child,index){return _objectSpread(_objectSpread({},child),{},{key:[column.key,child.key].join(SEP),border:!index?[BorderPosition.LEFT]:index===children.length-1?[BorderPosition.RIGHT]:undefined});};return!children?[].concat(_toConsumableArray(acc),[column]):[].concat(_toConsumableArray(acc),_toConsumableArray(children.map(renderChild)));},[]);var getClassName=function getClassName(_ref2){var align=_ref2.align,fixed=_ref2.fixed,narrow=_ref2.narrow,border=_ref2.border;var alignClassName=\"text-\".concat(align);var fixedClassName=\"fixed-\".concat(fixed);var borderClassName=cx(border===null||border===void 0?void 0:border.map(function(position){return\"border-\".concat(position);}));var narrowClassName=cx(narrow===null||narrow===void 0?void 0:narrow.map(function(position){return\"narrow-\".concat(position);}));return cx(styles.cell,alignClassName,fixedClassName,borderClassName,narrowClassName);};var renderColSpan=function renderColSpan(column){// children: colspan attribute, border props\n// No children: empty the title\nvar children=column.children;var colSpan=children===null||children===void 0?void 0:children.length;var next=Object.assign(_objectSpread(_objectSpread({},column),{},{colSpan:colSpan,children:undefined}),children?{border:[BorderPosition.LEFT,BorderPosition.RIGHT]}:{title:\"\"});return renderTh(next);};var renderTh=function renderTh(column){var key=column.key,title=column.title,colSpan=column.colSpan,width=column.width;return/*#__PURE__*/_jsx(\"th\",{className:classNames(getClassName(column),styles.th),colSpan:colSpan,style:{width:width},children:title!==null&&title!==void 0?title:key},key);};var colspan=columns.some(function(_ref3){var children=_ref3.children;return children;});return!dataSource.length?null:/*#__PURE__*/_jsx(\"div\",{className:styles.wrapper,children:/*#__PURE__*/_jsxs(\"table\",{className:cx({margin:colspan}),children:[/*#__PURE__*/_jsxs(\"thead\",{children:[colspan&&/*#__PURE__*/_jsx(\"tr\",{className:cx({colspan:colspan}),children:columns.map(renderColSpan)}),/*#__PURE__*/_jsx(\"tr\",{children:normalized.map(renderTh)})]}),/*#__PURE__*/_jsx(\"tbody\",{children:dataSource.map(function(record,index){var renderTd=function renderTd(column){var _render;var key=column.key,dataIndex=column.dataIndex,render=column.render;var className=column.className,bold=column.bold,width=column.width;var value=path((dataIndex!==null&&dataIndex!==void 0?dataIndex:key).split(SEP),record);var tdClassName=cx({bold:bold},styles.td,className);return/*#__PURE__*/_jsx(\"td\",{className:classNames(getClassName(column),tdClassName),style:{width:width},children:(_render=render===null||render===void 0?void 0:render(value,record,index))!==null&&_render!==void 0?_render:value},key);};return/*#__PURE__*/_jsx(\"tr\",{className:cx(rows===null||rows===void 0?void 0:rows(record).background),children:normalized.map(renderTd)},index);})})]})});}export default Table;","map":{"version":3,"sources":["/home/amro/MirrorProtocol/eth-web-app/src/components/Table.tsx"],"names":["classNames","path","styles","cx","bind","BorderPosition","SEP","Table","props","rows","columns","dataSource","normalized","reduce","acc","children","column","renderChild","child","index","key","join","border","LEFT","length","RIGHT","undefined","map","getClassName","align","fixed","narrow","alignClassName","fixedClassName","borderClassName","position","narrowClassName","cell","renderColSpan","colSpan","next","Object","assign","title","renderTh","width","th","colspan","some","wrapper","margin","record","renderTd","dataIndex","render","className","bold","value","split","tdClassName","td","background"],"mappings":"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","sourcesContent":["import { ReactNode } from \"react\"\nimport classNames from \"classnames/bind\"\nimport { path } from \"ramda\"\nimport styles from \"./Table.module.scss\"\n\nconst cx = classNames.bind(styles)\n\ninterface Props<T> {\n  rows?: (record: T) => Row\n  columns: Column<T>[]\n  dataSource: T[]\n}\n\ninterface Row {\n  background?: string\n}\n\ninterface Column<T> {\n  key: string\n  title?: ReactNode\n  dataIndex?: string\n  render?: (value: any, record: T, index: number) => ReactNode\n  children?: Column<T>[]\n\n  colSpan?: number\n  className?: string\n  align?: \"left\" | \"right\" | \"center\"\n  fixed?: \"left\" | \"right\"\n  narrow?: string[]\n  border?: BorderPosition[]\n  bold?: boolean\n  width?: string | number\n}\n\nenum BorderPosition {\n  LEFT = \"left\",\n  RIGHT = \"right\",\n}\n\nconst SEP = \".\"\n\ntype DefaultRecordType = Record<string, any>\nfunction Table<T extends DefaultRecordType>(props: Props<T>) {\n  const { rows, columns, dataSource } = props\n\n  const normalized = columns.reduce<Column<T>[]>(\n    (acc, { children, ...column }) => {\n      // Normalize nested columns below `children`\n      // The first child draws the left border\n      // The last child draws the right border.\n      const renderChild = (child: Column<T>, index: number) => ({\n        ...child,\n        key: [column.key, child.key].join(SEP),\n        border: !index\n          ? [BorderPosition.LEFT]\n          : index === children!.length - 1\n          ? [BorderPosition.RIGHT]\n          : undefined,\n      })\n\n      return !children\n        ? [...acc, column]\n        : [...acc, ...children.map(renderChild)]\n    },\n    []\n  )\n\n  const getClassName = ({ align, fixed, narrow, border }: Column<T>) => {\n    const alignClassName = `text-${align}`\n    const fixedClassName = `fixed-${fixed}`\n    const borderClassName = cx(border?.map((position) => `border-${position}`))\n    const narrowClassName = cx(narrow?.map((position) => `narrow-${position}`))\n\n    return cx(\n      styles.cell,\n      alignClassName,\n      fixedClassName,\n      borderClassName,\n      narrowClassName\n    )\n  }\n\n  const renderColSpan = (column: Column<T>) => {\n    // children: colspan attribute, border props\n    // No children: empty the title\n    const { children } = column\n    const colSpan = children?.length\n    const next = Object.assign(\n      { ...column, colSpan, children: undefined },\n      children\n        ? { border: [BorderPosition.LEFT, BorderPosition.RIGHT] }\n        : { title: \"\" }\n    )\n\n    return renderTh(next)\n  }\n\n  const renderTh = (column: Column<T>): ReactNode => {\n    const { key, title, colSpan, width } = column\n    return (\n      <th\n        className={classNames(getClassName(column), styles.th)}\n        colSpan={colSpan}\n        style={{ width }}\n        key={key}\n      >\n        {title ?? key}\n      </th>\n    )\n  }\n\n  const colspan = columns.some(({ children }) => children)\n  return !dataSource.length ? null : (\n    <div className={styles.wrapper}>\n      <table className={cx({ margin: colspan })}>\n        <thead>\n          {colspan && (\n            <tr className={cx({ colspan })}>{columns.map(renderColSpan)}</tr>\n          )}\n\n          <tr>{normalized.map(renderTh)}</tr>\n        </thead>\n\n        <tbody>\n          {dataSource.map((record, index) => {\n            const renderTd = (column: Column<T>): ReactNode => {\n              const { key, dataIndex, render } = column\n              const { className, bold, width } = column\n              const value = path<any>((dataIndex ?? key).split(SEP), record)\n              const tdClassName = cx({ bold }, styles.td, className)\n\n              return (\n                <td\n                  className={classNames(getClassName(column), tdClassName)}\n                  style={{ width }}\n                  key={key}\n                >\n                  {render?.(value, record, index) ?? value}\n                </td>\n              )\n            }\n\n            return (\n              <tr className={cx(rows?.(record).background)} key={index}>\n                {normalized.map(renderTd)}\n              </tr>\n            )\n          })}\n        </tbody>\n      </table>\n    </div>\n  )\n}\n\nexport default Table\n"]},"metadata":{},"sourceType":"module"}